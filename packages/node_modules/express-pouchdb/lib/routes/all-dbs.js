"use strict";

const utils = require('../utils');

module.exports = (app) => {
  // List all databases.
  app.get('/_all_dbs', (req, res) => {
    req.PouchDB.allDbs((err, response) => {
      if (err) {
        return utils.sendError(res, err);
      }

      response = response.filter((name) => name !== 'pouch__auth_sessions__');
      utils.sendJSON(res, 200, response);
    });
  });
};
